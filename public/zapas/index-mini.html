<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta http-equiv="refresh" content="3600">
<title>@git-app-mini</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#db5945">
<style>
  body {font:normal 1em verdana}
</style>
<script>
let info= "";
let url = "http://192.168.0.5/";
document.addEventListener("DOMContentLoaded",function(){
  let urlObj = new URL(window.location.href);
  url = urlObj.searchParams.get("url") || url;
  console.log(url);
  localStorage.setItem("url", url);
  
  
    info = document.getElementById("info");
    //document.getElementById("info").textContent = "info";
});
const sn=(nr)=>{
  //http://192.168.31.115/radio?t=1
  let u = url+"/radio?t="+nr;
  let uu = (window.location.search.split("=")[1] || url)+"/radio?t="+nr;
    console.log("nr=",nr);
    console.log("u=",u);
    console.log("uu=",uu);
  window.location.href
  info.innerHTML = `<h3>nr=${nr}; ${u}</h3>`;
  
  fetch(u)
  .then(response => response.text())
  .then(data => console.log(1,data));  
  
  fetch(uu)
  .then(response => response.text())
  .then(data => console.log(2,data));  
  /*
  fetch(u,{credentials: 'omit'})
  .then(response => response.text())
  .then(data => console.log(11,data));  
  
  fetch(uu,{credentials: 'omit'})
  .then(response => response.text())
  .then(data => console.log(21,data));  */
  
  
  
}
</script>
</head>
<body>
<h3>@git-app-mini 4</h3>
<div class="col">
  <button onClick="sn(1)">Radio-1</button>
  <button onClick="sn(2)">Radio-2</button>
  <button onClick="sn(3)">Radio-3</button>
    
</div>
<div id="info"></div>
</body>
</html>



